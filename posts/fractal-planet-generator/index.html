<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>断層線アルゴリズムによるフラクタル惑星生成 | My Site</title><meta name=keywords content="フラクタル,数値シミュレーション,Python,Three.js,WebGL,webapp"><meta name=description content="フラクタル惑星生成アプリ
ランダムな断層線（大円）を累積的に配置することで、リアルな地形を持つフラクタル惑星を生成するWebアプリケーションを作成しました。
アプリを試す →
断層線アルゴリズムとは
断層線アルゴリズム（Fault Line Algorithm）は、地形生成の古典的な手法の一つで、地質学的な断層運動を模倣することでフラクタル的な地形を作り出します。
基本原理
球面上での断層線アルゴリズムは以下のステップで動作します：

ランダムな大円の生成

球の中心を通る平面をランダムに生成
この平面と球面の交線が「断層線」となる






地形の変位

断層線の両側で高度を上下させる
片側を+d、反対側を-dだけ変位



反復処理

このプロセスを数百回繰り返す
各断層の変位量は一定または減衰



フラクタル地形の生成

多数の断層が重なることで複雑な地形が形成される
自然な山脈、平野、海洋が現れる



数学的定式化
球面上の点 $\mathbf{r} = (x, y, z)$（単位球上）と、ランダムな単位法線ベクトル $\mathbf{n} = (n_x, n_y, n_z)$ について：
大円による平面の方程式：
$$
\mathbf{n} \cdot \mathbf{r} = 0
$$
点 $\mathbf{r}$ がどちら側にあるかは内積の符号で判定：
$$
\text{side}(\mathbf{r}) = \text{sign}(\mathbf{n} \cdot \mathbf{r})
$$
$i$ 回目の断層による高度変化：
$$
h_i(\mathbf{r}) = d_i \cdot \text{side}_i(\mathbf{r})
$$
総合的な高度：
$$
H(\mathbf{r}) = \sum_{i=1}^{N} h_i(\mathbf{r})
$$"><meta name=author content><link rel=canonical href=https://hogexcom.github.io/my-site/posts/fractal-planet-generator/><link crossorigin=anonymous href=/my-site/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css integrity="sha256-NDzEgLn/yPBMy+XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as=style><link rel=icon href=https://hogexcom.github.io/my-site/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://hogexcom.github.io/my-site/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://hogexcom.github.io/my-site/favicon-32x32.png><link rel=apple-touch-icon href=https://hogexcom.github.io/my-site/apple-touch-icon.png><link rel=mask-icon href=https://hogexcom.github.io/my-site/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://hogexcom.github.io/my-site/posts/fractal-planet-generator/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1})'></script><meta property="og:url" content="https://hogexcom.github.io/my-site/posts/fractal-planet-generator/"><meta property="og:site_name" content="My Site"><meta property="og:title" content="断層線アルゴリズムによるフラクタル惑星生成"><meta property="og:description" content="フラクタル惑星生成アプリ ランダムな断層線（大円）を累積的に配置することで、リアルな地形を持つフラクタル惑星を生成するWebアプリケーションを作成しました。
アプリを試す →
断層線アルゴリズムとは 断層線アルゴリズム（Fault Line Algorithm）は、地形生成の古典的な手法の一つで、地質学的な断層運動を模倣することでフラクタル的な地形を作り出します。
基本原理 球面上での断層線アルゴリズムは以下のステップで動作します：
ランダムな大円の生成 球の中心を通る平面をランダムに生成 この平面と球面の交線が「断層線」となる 地形の変位
断層線の両側で高度を上下させる 片側を+d、反対側を-dだけ変位 反復処理
このプロセスを数百回繰り返す 各断層の変位量は一定または減衰 フラクタル地形の生成
多数の断層が重なることで複雑な地形が形成される 自然な山脈、平野、海洋が現れる 数学的定式化 球面上の点 $\mathbf{r} = (x, y, z)$（単位球上）と、ランダムな単位法線ベクトル $\mathbf{n} = (n_x, n_y, n_z)$ について：
大円による平面の方程式： $$ \mathbf{n} \cdot \mathbf{r} = 0 $$
点 $\mathbf{r}$ がどちら側にあるかは内積の符号で判定： $$ \text{side}(\mathbf{r}) = \text{sign}(\mathbf{n} \cdot \mathbf{r}) $$
$i$ 回目の断層による高度変化： $$ h_i(\mathbf{r}) = d_i \cdot \text{side}_i(\mathbf{r}) $$
総合的な高度： $$ H(\mathbf{r}) = \sum_{i=1}^{N} h_i(\mathbf{r}) $$"><meta property="og:locale" content="ja-JP"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-19T00:00:00+09:00"><meta property="article:modified_time" content="2025-12-19T00:00:00+09:00"><meta property="article:tag" content="フラクタル"><meta property="article:tag" content="数値シミュレーション"><meta property="article:tag" content="Python"><meta property="article:tag" content="Three.js"><meta property="article:tag" content="WebGL"><meta property="article:tag" content="Webapp"><meta property="og:image" content="https://hogexcom.github.io/my-site/images/fractal-planet-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://hogexcom.github.io/my-site/images/fractal-planet-cover.png"><meta name=twitter:title content="断層線アルゴリズムによるフラクタル惑星生成"><meta name=twitter:description content="フラクタル惑星生成アプリ
ランダムな断層線（大円）を累積的に配置することで、リアルな地形を持つフラクタル惑星を生成するWebアプリケーションを作成しました。
アプリを試す →
断層線アルゴリズムとは
断層線アルゴリズム（Fault Line Algorithm）は、地形生成の古典的な手法の一つで、地質学的な断層運動を模倣することでフラクタル的な地形を作り出します。
基本原理
球面上での断層線アルゴリズムは以下のステップで動作します：

ランダムな大円の生成

球の中心を通る平面をランダムに生成
この平面と球面の交線が「断層線」となる






地形の変位

断層線の両側で高度を上下させる
片側を+d、反対側を-dだけ変位



反復処理

このプロセスを数百回繰り返す
各断層の変位量は一定または減衰



フラクタル地形の生成

多数の断層が重なることで複雑な地形が形成される
自然な山脈、平野、海洋が現れる



数学的定式化
球面上の点 $\mathbf{r} = (x, y, z)$（単位球上）と、ランダムな単位法線ベクトル $\mathbf{n} = (n_x, n_y, n_z)$ について：
大円による平面の方程式：
$$
\mathbf{n} \cdot \mathbf{r} = 0
$$
点 $\mathbf{r}$ がどちら側にあるかは内積の符号で判定：
$$
\text{side}(\mathbf{r}) = \text{sign}(\mathbf{n} \cdot \mathbf{r})
$$
$i$ 回目の断層による高度変化：
$$
h_i(\mathbf{r}) = d_i \cdot \text{side}_i(\mathbf{r})
$$
総合的な高度：
$$
H(\mathbf{r}) = \sum_{i=1}^{N} h_i(\mathbf{r})
$$"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://hogexcom.github.io/my-site/posts/"},{"@type":"ListItem","position":2,"name":"断層線アルゴリズムによるフラクタル惑星生成","item":"https://hogexcom.github.io/my-site/posts/fractal-planet-generator/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"断層線アルゴリズムによるフラクタル惑星生成","name":"断層線アルゴリズムによるフラクタル惑星生成","description":"フラクタル惑星生成アプリ ランダムな断層線（大円）を累積的に配置することで、リアルな地形を持つフラクタル惑星を生成するWebアプリケーションを作成しました。\nアプリを試す →\n断層線アルゴリズムとは 断層線アルゴリズム（Fault Line Algorithm）は、地形生成の古典的な手法の一つで、地質学的な断層運動を模倣することでフラクタル的な地形を作り出します。\n基本原理 球面上での断層線アルゴリズムは以下のステップで動作します：\nランダムな大円の生成 球の中心を通る平面をランダムに生成 この平面と球面の交線が「断層線」となる 地形の変位\n断層線の両側で高度を上下させる 片側を+d、反対側を-dだけ変位 反復処理\nこのプロセスを数百回繰り返す 各断層の変位量は一定または減衰 フラクタル地形の生成\n多数の断層が重なることで複雑な地形が形成される 自然な山脈、平野、海洋が現れる 数学的定式化 球面上の点 $\\mathbf{r} = (x, y, z)$（単位球上）と、ランダムな単位法線ベクトル $\\mathbf{n} = (n_x, n_y, n_z)$ について：\n大円による平面の方程式： $$ \\mathbf{n} \\cdot \\mathbf{r} = 0 $$\n点 $\\mathbf{r}$ がどちら側にあるかは内積の符号で判定： $$ \\text{side}(\\mathbf{r}) = \\text{sign}(\\mathbf{n} \\cdot \\mathbf{r}) $$\n$i$ 回目の断層による高度変化： $$ h_i(\\mathbf{r}) = d_i \\cdot \\text{side}_i(\\mathbf{r}) $$\n総合的な高度： $$ H(\\mathbf{r}) = \\sum_{i=1}^{N} h_i(\\mathbf{r}) $$\n","keywords":["フラクタル","数値シミュレーション","Python","Three.js","WebGL","webapp"],"articleBody":"フラクタル惑星生成アプリ ランダムな断層線（大円）を累積的に配置することで、リアルな地形を持つフラクタル惑星を生成するWebアプリケーションを作成しました。\nアプリを試す →\n断層線アルゴリズムとは 断層線アルゴリズム（Fault Line Algorithm）は、地形生成の古典的な手法の一つで、地質学的な断層運動を模倣することでフラクタル的な地形を作り出します。\n基本原理 球面上での断層線アルゴリズムは以下のステップで動作します：\nランダムな大円の生成 球の中心を通る平面をランダムに生成 この平面と球面の交線が「断層線」となる 地形の変位\n断層線の両側で高度を上下させる 片側を+d、反対側を-dだけ変位 反復処理\nこのプロセスを数百回繰り返す 各断層の変位量は一定または減衰 フラクタル地形の生成\n多数の断層が重なることで複雑な地形が形成される 自然な山脈、平野、海洋が現れる 数学的定式化 球面上の点 $\\mathbf{r} = (x, y, z)$（単位球上）と、ランダムな単位法線ベクトル $\\mathbf{n} = (n_x, n_y, n_z)$ について：\n大円による平面の方程式： $$ \\mathbf{n} \\cdot \\mathbf{r} = 0 $$\n点 $\\mathbf{r}$ がどちら側にあるかは内積の符号で判定： $$ \\text{side}(\\mathbf{r}) = \\text{sign}(\\mathbf{n} \\cdot \\mathbf{r}) $$\n$i$ 回目の断層による高度変化： $$ h_i(\\mathbf{r}) = d_i \\cdot \\text{side}_i(\\mathbf{r}) $$\n総合的な高度： $$ H(\\mathbf{r}) = \\sum_{i=1}^{N} h_i(\\mathbf{r}) $$\n座標系の変換 球面座標から直交座標への変換 経度 $\\lambda \\in [-\\pi, \\pi]$、緯度 $\\phi \\in [-\\pi/2, \\pi/2]$ として：\n$$ \\begin{aligned} x \u0026= \\cos\\phi \\cos\\lambda \\ y \u0026= \\cos\\phi \\sin\\lambda \\ z \u0026= \\sin\\phi \\end{aligned} $$\nPlate Carrée投影 球面を2次元平面に展開する最もシンプルな投影法：\n横軸：経度 $\\lambda$（-180° ～ +180°） 縦軸：緯度 $\\phi$（-90° ～ +90°） この投影は極付近で歪みが大きいですが、実装が容易で全球を一覧できます。\nアプリの特徴 1. 効率的な累積計算 従来の方法では、100断層、200断層、300断層…と生成するたびに0からやり直していましたが、このアプリでは：\ndef generate_multiple_planets(width, height, fault_counts=[100, 200, 300, 400, 500]): textures = [] planet = FractalPlanet(width=width, height=height) prev_count = 0 for num_faults in fault_counts: # 追加の断層のみを生成 additional_faults = num_faults - prev_count planet.generate_terrain(num_faults=additional_faults) # 現在の状態をテクスチャとして保存 texture = planet.get_texture_array() textures.append(texture) prev_count = num_faults return textures この方法により、計算時間を大幅に短縮できます。\n2. Earth-likeカラーマッピング 高度に応じて地球らしい配色を適用：\n高度範囲 色 地形 0.0 - 0.3 深い青 深海 0.3 - 0.4 青 海洋 0.4 - 0.45 水色 浅瀬 0.45 - 0.5 ベージュ 海岸 0.5 - 0.6 緑 低地 0.6 - 0.7 明るい緑 平野 0.7 - 0.8 茶色 丘陵 0.8 - 0.9 灰色 山岳 0.9 - 1.0 白 雪山 3. Three.jsによる3D可視化 リアルなライティング\n太陽光（Directional Light） アンビエントライト（全体照明） 半球ライト（空からの間接光） リムライト（惑星の縁を強調） インタラクティブな操作\nOrbitControlsによる自由な視点移動 自動回転アニメーション ズームイン/アウト 宇宙空間の演出\n5000個のランダムな星 太陽とグローエフェクト 暗い背景と美しいコントラスト 4. UIの工夫 左右分割レイアウト\n左：断層数別の2D地図リスト 右：500断層の3D惑星ビュー クリックで拡大表示\n地図をクリックすると高解像度モーダル表示 詳細な地形パターンを確認可能 技術スタック フロントエンド React + TypeScript：UI構築 Three.js：3Dレンダリング Vite：高速ビルドツール 計算エンジン Pyodide：ブラウザ上でPythonを実行 NumPy：高速な数値計算 科学計算ライブラリ：効率的な配列操作 テクスチャ生成 解像度：1024×512ピクセル カラーフォーマット：RGBA（32bit） 球面座標からの変換 フラクタル地形生成の応用 ゲーム開発 プロシージャル惑星生成 無限に続くオープンワールド ランダムマップジェネレータ CG・映像制作 SF映画の未知の惑星 アニメーションの背景 概念アート 科学シミュレーション 地形モデリング 地質学的プロセスの研究 惑星形成シミュレーション データ可視化 多次元データの表現 統計的パターンの視覚化 今後の拡張案 パラメータ調整UI\n変位量の調整 減衰率の設定 リアルタイムプレビュー 追加の地形アルゴリズム\nPerlinノイズ Simplex noise Diamond-square algorithm 物理ベースレンダリング\n大気散乱シミュレーション 雲のレイヤー 海面の反射 エクスポート機能\nOBJ形式で3Dメッシュ保存 PNG形式でテクスチャ保存 高解像度レンダリング 参考文献 Peitgen, H.-O., \u0026 Saupe, D. (Eds.). (1988). The Science of Fractal Images. Springer-Verlag.\nMusgrave, F. K., Kolb, C. E., \u0026 Mace, R. S. (1989). “The synthesis and rendering of eroded fractal terrains.” ACM SIGGRAPH Computer Graphics, 23(3), 41-50.\nFournier, A., Fussell, D., \u0026 Carpenter, L. (1982). “Computer rendering of stochastic models.” Communications of the ACM, 25(6), 371-384.\nMiller, G. S. P. (1986). “The definition and rendering of terrain maps.” ACM SIGGRAPH Computer Graphics, 20(4), 39-48.\nEbert, D. S., Musgrave, F. K., Peachey, D., Perlin, K., \u0026 Worley, S. (2002). Texturing \u0026 Modeling: A Procedural Approach (3rd ed.). Morgan Kaufmann.\nまとめ 断層線アルゴリズムは、シンプルながらも効果的なフラクタル地形生成手法です。このアプリでは、Pythonの数値計算とThree.jsの3D可視化を組み合わせることで、ブラウザ上でインタラクティブに惑星を生成・観察できるようにしました。\n累積的な計算手法により、異なる複雑度の地形を効率的に比較でき、フラクタル構造の形成過程を視覚的に理解することができます。\nぜひアプリで自分だけの惑星を生成してみてください！\n","wordCount":"385","inLanguage":"en","image":"https://hogexcom.github.io/my-site/images/fractal-planet-cover.png","datePublished":"2025-12-19T00:00:00+09:00","dateModified":"2025-12-19T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://hogexcom.github.io/my-site/posts/fractal-planet-generator/"},"publisher":{"@type":"Organization","name":"My Site","logo":{"@type":"ImageObject","url":"https://hogexcom.github.io/my-site/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://hogexcom.github.io/my-site/ accesskey=h title="My Site (Alt + H)">My Site</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">断層線アルゴリズムによるフラクタル惑星生成</h1><div class=post-meta><span title='2025-12-19 00:00:00 +0900 +0900'>December 19, 2025</span></div></header><figure class=entry-cover><img loading=eager src=https://hogexcom.github.io/my-site/images/fractal-planet-cover.png alt=フラクタル惑星の地形テクスチャ></figure><div class=post-content><h2 id=フラクタル惑星生成アプリ>フラクタル惑星生成アプリ<a hidden class=anchor aria-hidden=true href=#フラクタル惑星生成アプリ>#</a></h2><p>ランダムな断層線（大円）を累積的に配置することで、リアルな地形を持つフラクタル惑星を生成するWebアプリケーションを作成しました。</p><p><strong><a href=/my-site/python-apps/fractal-planet/>アプリを試す →</a></strong></p><h2 id=断層線アルゴリズムとは>断層線アルゴリズムとは<a hidden class=anchor aria-hidden=true href=#断層線アルゴリズムとは>#</a></h2><p>断層線アルゴリズム（Fault Line Algorithm）は、地形生成の古典的な手法の一つで、地質学的な断層運動を模倣することでフラクタル的な地形を作り出します。</p><h3 id=基本原理>基本原理<a hidden class=anchor aria-hidden=true href=#基本原理>#</a></h3><p>球面上での断層線アルゴリズムは以下のステップで動作します：</p><ol><li><strong>ランダムな大円の生成</strong><ul><li>球の中心を通る平面をランダムに生成</li><li>この平面と球面の交線が「断層線」となる</li></ul></li></ol><p><img alt=断層線アルゴリズムの仕組み loading=lazy src=/my-site/images/fractal-planet-diagram.png></p><ol start=2><li><p><strong>地形の変位</strong></p><ul><li>断層線の両側で高度を上下させる</li><li>片側を<code>+d</code>、反対側を<code>-d</code>だけ変位</li></ul></li><li><p><strong>反復処理</strong></p><ul><li>このプロセスを数百回繰り返す</li><li>各断層の変位量は一定または減衰</li></ul></li><li><p><strong>フラクタル地形の生成</strong></p><ul><li>多数の断層が重なることで複雑な地形が形成される</li><li>自然な山脈、平野、海洋が現れる</li></ul></li></ol><h3 id=数学的定式化>数学的定式化<a hidden class=anchor aria-hidden=true href=#数学的定式化>#</a></h3><p>球面上の点 $\mathbf{r} = (x, y, z)$（単位球上）と、ランダムな単位法線ベクトル $\mathbf{n} = (n_x, n_y, n_z)$ について：</p><p>大円による平面の方程式：
$$
\mathbf{n} \cdot \mathbf{r} = 0
$$</p><p>点 $\mathbf{r}$ がどちら側にあるかは内積の符号で判定：
$$
\text{side}(\mathbf{r}) = \text{sign}(\mathbf{n} \cdot \mathbf{r})
$$</p><p>$i$ 回目の断層による高度変化：
$$
h_i(\mathbf{r}) = d_i \cdot \text{side}_i(\mathbf{r})
$$</p><p>総合的な高度：
$$
H(\mathbf{r}) = \sum_{i=1}^{N} h_i(\mathbf{r})
$$</p><h3 id=座標系の変換>座標系の変換<a hidden class=anchor aria-hidden=true href=#座標系の変換>#</a></h3><h4 id=球面座標から直交座標への変換>球面座標から直交座標への変換<a hidden class=anchor aria-hidden=true href=#球面座標から直交座標への変換>#</a></h4><p>経度 $\lambda \in [-\pi, \pi]$、緯度 $\phi \in [-\pi/2, \pi/2]$ として：</p><p>$$
\begin{aligned}
x &= \cos\phi \cos\lambda \
y &= \cos\phi \sin\lambda \
z &= \sin\phi
\end{aligned}
$$</p><h4 id=plate-carrée投影>Plate Carrée投影<a hidden class=anchor aria-hidden=true href=#plate-carrée投影>#</a></h4><p>球面を2次元平面に展開する最もシンプルな投影法：</p><ul><li>横軸：経度 $\lambda$（-180° ～ +180°）</li><li>縦軸：緯度 $\phi$（-90° ～ +90°）</li></ul><p>この投影は極付近で歪みが大きいですが、実装が容易で全球を一覧できます。</p><h2 id=アプリの特徴>アプリの特徴<a hidden class=anchor aria-hidden=true href=#アプリの特徴>#</a></h2><h3 id=1-効率的な累積計算>1. 効率的な累積計算<a hidden class=anchor aria-hidden=true href=#1-効率的な累積計算>#</a></h3><p>従来の方法では、100断層、200断層、300断層&mldr;と生成するたびに0からやり直していましたが、このアプリでは：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate_multiple_planets</span>(width, height, fault_counts<span style=color:#f92672>=</span>[<span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>200</span>, <span style=color:#ae81ff>300</span>, <span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>500</span>]):
</span></span><span style=display:flex><span>    textures <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span>    planet <span style=color:#f92672>=</span> FractalPlanet(width<span style=color:#f92672>=</span>width, height<span style=color:#f92672>=</span>height)
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    prev_count <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> num_faults <span style=color:#f92672>in</span> fault_counts:
</span></span><span style=display:flex><span>        <span style=color:#75715e># 追加の断層のみを生成</span>
</span></span><span style=display:flex><span>        additional_faults <span style=color:#f92672>=</span> num_faults <span style=color:#f92672>-</span> prev_count
</span></span><span style=display:flex><span>        planet<span style=color:#f92672>.</span>generate_terrain(num_faults<span style=color:#f92672>=</span>additional_faults)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e># 現在の状態をテクスチャとして保存</span>
</span></span><span style=display:flex><span>        texture <span style=color:#f92672>=</span> planet<span style=color:#f92672>.</span>get_texture_array()
</span></span><span style=display:flex><span>        textures<span style=color:#f92672>.</span>append(texture)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        prev_count <span style=color:#f92672>=</span> num_faults
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> textures
</span></span></code></pre></div><p>この方法により、計算時間を大幅に短縮できます。</p><h3 id=2-earth-likeカラーマッピング>2. Earth-likeカラーマッピング<a hidden class=anchor aria-hidden=true href=#2-earth-likeカラーマッピング>#</a></h3><p>高度に応じて地球らしい配色を適用：</p><table><thead><tr><th>高度範囲</th><th>色</th><th>地形</th></tr></thead><tbody><tr><td>0.0 - 0.3</td><td>深い青</td><td>深海</td></tr><tr><td>0.3 - 0.4</td><td>青</td><td>海洋</td></tr><tr><td>0.4 - 0.45</td><td>水色</td><td>浅瀬</td></tr><tr><td>0.45 - 0.5</td><td>ベージュ</td><td>海岸</td></tr><tr><td>0.5 - 0.6</td><td>緑</td><td>低地</td></tr><tr><td>0.6 - 0.7</td><td>明るい緑</td><td>平野</td></tr><tr><td>0.7 - 0.8</td><td>茶色</td><td>丘陵</td></tr><tr><td>0.8 - 0.9</td><td>灰色</td><td>山岳</td></tr><tr><td>0.9 - 1.0</td><td>白</td><td>雪山</td></tr></tbody></table><h3 id=3-threejsによる3d可視化>3. Three.jsによる3D可視化<a hidden class=anchor aria-hidden=true href=#3-threejsによる3d可視化>#</a></h3><ul><li><p><strong>リアルなライティング</strong></p><ul><li>太陽光（Directional Light）</li><li>アンビエントライト（全体照明）</li><li>半球ライト（空からの間接光）</li><li>リムライト（惑星の縁を強調）</li></ul></li><li><p><strong>インタラクティブな操作</strong></p><ul><li>OrbitControlsによる自由な視点移動</li><li>自動回転アニメーション</li><li>ズームイン/アウト</li></ul></li><li><p><strong>宇宙空間の演出</strong></p><ul><li>5000個のランダムな星</li><li>太陽とグローエフェクト</li><li>暗い背景と美しいコントラスト</li></ul></li></ul><h3 id=4-uiの工夫>4. UIの工夫<a hidden class=anchor aria-hidden=true href=#4-uiの工夫>#</a></h3><ul><li><p><strong>左右分割レイアウト</strong></p><ul><li>左：断層数別の2D地図リスト</li><li>右：500断層の3D惑星ビュー</li></ul></li><li><p><strong>クリックで拡大表示</strong></p><ul><li>地図をクリックすると高解像度モーダル表示</li><li>詳細な地形パターンを確認可能</li></ul></li></ul><h2 id=技術スタック>技術スタック<a hidden class=anchor aria-hidden=true href=#技術スタック>#</a></h2><h3 id=フロントエンド>フロントエンド<a hidden class=anchor aria-hidden=true href=#フロントエンド>#</a></h3><ul><li><strong>React + TypeScript</strong>：UI構築</li><li><strong>Three.js</strong>：3Dレンダリング</li><li><strong>Vite</strong>：高速ビルドツール</li></ul><h3 id=計算エンジン>計算エンジン<a hidden class=anchor aria-hidden=true href=#計算エンジン>#</a></h3><ul><li><strong>Pyodide</strong>：ブラウザ上でPythonを実行</li><li><strong>NumPy</strong>：高速な数値計算</li><li><strong>科学計算ライブラリ</strong>：効率的な配列操作</li></ul><h3 id=テクスチャ生成>テクスチャ生成<a hidden class=anchor aria-hidden=true href=#テクスチャ生成>#</a></h3><ul><li>解像度：1024×512ピクセル</li><li>カラーフォーマット：RGBA（32bit）</li><li>球面座標からの変換</li></ul><h2 id=フラクタル地形生成の応用>フラクタル地形生成の応用<a hidden class=anchor aria-hidden=true href=#フラクタル地形生成の応用>#</a></h2><h3 id=ゲーム開発>ゲーム開発<a hidden class=anchor aria-hidden=true href=#ゲーム開発>#</a></h3><ul><li>プロシージャル惑星生成</li><li>無限に続くオープンワールド</li><li>ランダムマップジェネレータ</li></ul><h3 id=cg映像制作>CG・映像制作<a hidden class=anchor aria-hidden=true href=#cg映像制作>#</a></h3><ul><li>SF映画の未知の惑星</li><li>アニメーションの背景</li><li>概念アート</li></ul><h3 id=科学シミュレーション>科学シミュレーション<a hidden class=anchor aria-hidden=true href=#科学シミュレーション>#</a></h3><ul><li>地形モデリング</li><li>地質学的プロセスの研究</li><li>惑星形成シミュレーション</li></ul><h3 id=データ可視化>データ可視化<a hidden class=anchor aria-hidden=true href=#データ可視化>#</a></h3><ul><li>多次元データの表現</li><li>統計的パターンの視覚化</li></ul><h2 id=今後の拡張案>今後の拡張案<a hidden class=anchor aria-hidden=true href=#今後の拡張案>#</a></h2><ol><li><p><strong>パラメータ調整UI</strong></p><ul><li>変位量の調整</li><li>減衰率の設定</li><li>リアルタイムプレビュー</li></ul></li><li><p><strong>追加の地形アルゴリズム</strong></p><ul><li>Perlinノイズ</li><li>Simplex noise</li><li>Diamond-square algorithm</li></ul></li><li><p><strong>物理ベースレンダリング</strong></p><ul><li>大気散乱シミュレーション</li><li>雲のレイヤー</li><li>海面の反射</li></ul></li><li><p><strong>エクスポート機能</strong></p><ul><li>OBJ形式で3Dメッシュ保存</li><li>PNG形式でテクスチャ保存</li><li>高解像度レンダリング</li></ul></li></ol><h2 id=参考文献>参考文献<a hidden class=anchor aria-hidden=true href=#参考文献>#</a></h2><ol><li><p>Peitgen, H.-O., & Saupe, D. (Eds.). (1988). <em>The Science of Fractal Images</em>. Springer-Verlag.</p></li><li><p>Musgrave, F. K., Kolb, C. E., & Mace, R. S. (1989). &ldquo;The synthesis and rendering of eroded fractal terrains.&rdquo; <em>ACM SIGGRAPH Computer Graphics</em>, 23(3), 41-50.</p></li><li><p>Fournier, A., Fussell, D., & Carpenter, L. (1982). &ldquo;Computer rendering of stochastic models.&rdquo; <em>Communications of the ACM</em>, 25(6), 371-384.</p></li><li><p>Miller, G. S. P. (1986). &ldquo;The definition and rendering of terrain maps.&rdquo; <em>ACM SIGGRAPH Computer Graphics</em>, 20(4), 39-48.</p></li><li><p>Ebert, D. S., Musgrave, F. K., Peachey, D., Perlin, K., & Worley, S. (2002). <em>Texturing & Modeling: A Procedural Approach</em> (3rd ed.). Morgan Kaufmann.</p></li></ol><h2 id=まとめ>まとめ<a hidden class=anchor aria-hidden=true href=#まとめ>#</a></h2><p>断層線アルゴリズムは、シンプルながらも効果的なフラクタル地形生成手法です。このアプリでは、Pythonの数値計算とThree.jsの3D可視化を組み合わせることで、ブラウザ上でインタラクティブに惑星を生成・観察できるようにしました。</p><p>累積的な計算手法により、異なる複雑度の地形を効率的に比較でき、フラクタル構造の形成過程を視覚的に理解することができます。</p><p>ぜひアプリで自分だけの惑星を生成してみてください！</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://hogexcom.github.io/my-site/tags/%E3%83%95%E3%83%A9%E3%82%AF%E3%82%BF%E3%83%AB/>フラクタル</a></li><li><a href=https://hogexcom.github.io/my-site/tags/%E6%95%B0%E5%80%A4%E3%82%B7%E3%83%9F%E3%83%A5%E3%83%AC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3/>数値シミュレーション</a></li><li><a href=https://hogexcom.github.io/my-site/tags/python/>Python</a></li><li><a href=https://hogexcom.github.io/my-site/tags/three.js/>Three.js</a></li><li><a href=https://hogexcom.github.io/my-site/tags/webgl/>WebGL</a></li><li><a href=https://hogexcom.github.io/my-site/tags/webapp/>Webapp</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://hogexcom.github.io/my-site/>My Site</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>