import{r as s}from"./vendor-three-CePzC98V.js";const w="/my-site/python-apps/";function E(d=[],c={}){const[l,p]=s.useState(null),[y,u]=s.useState(!1),[f,P]=s.useState(null),{packages:i=[]}=c;return s.useEffect(()=>{let t=!1;async function g(){try{if(console.log("Loading Pyodide..."),!window.loadPyodide){const e=document.createElement("script");e.src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js",e.async=!0,await new Promise((n,a)=>{e.onload=n,e.onerror=a,document.head.appendChild(e)})}const o=await window.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.25.0/full/"});if(t)return;const r=["numpy","scipy",...i];if(console.log(`Loading packages: ${r.join(", ")}...`),await o.loadPackage(r),t)return;for(const e of d){console.log(`Loading Python module: ${e}...`);const n=await fetch(`${w}${e}`);if(!n.ok)throw new Error(`Failed to fetch ${e}: ${n.statusText}`);const a=await n.text(),h=e.split("/").pop()||e;o.FS.writeFile(`/${h}`,a)}if(await o.runPythonAsync(`
import sys
if '/' not in sys.path:
    sys.path.append('/')
`),t)return;p(o),u(!0),console.log("Pyodide ready!")}catch(o){t||(console.error("Failed to load Pyodide:",o),P(o instanceof Error?o.message:String(o)))}}return g(),()=>{t=!0}},[d.join(","),i.join(",")]),{pyodide:l,isReady:y,error:f}}export{E as u};
